<?xml version="1.0" encoding="UTF-8"?>
<!--Generated by Turbo XML 2.4.1.100. Conforms to w3c http://www.w3.org/2001/XMLSchema-->
<xsd:schema
	xmlns:jesb="http://anonsvn.labs.jboss.com/labs/jbossesb/trunk/product/etc/schemas/xml/jbossesb-1.2.0.xsd"
	xmlns:xsd="http://www.w3.org/2001/XMLSchema"
	elementFormDefault="qualified"
	targetNamespace="http://anonsvn.labs.jboss.com/labs/jbossesb/trunk/product/etc/schemas/xml/jbossesb-1.2.0.xsd">

	<!-- 88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
		Document root + some basic types.
		88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888-->

	<xsd:element name="jbossesb">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				The jbossesb configuration for a single instance.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:sequence>
				<xsd:element maxOccurs="1" minOccurs="0"
					ref="jesb:globals" />
				<xsd:element maxOccurs="1" minOccurs="0"
					ref="jesb:providers" />
				<xsd:element maxOccurs="1" minOccurs="0"
					ref="jesb:services" />
			</xsd:sequence>
			<xsd:attribute default="180" name="parameterReloadSecs"
				use="optional" />
		</xsd:complexType>
	</xsd:element>

	<xsd:element name="property">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				A simple name-value pair.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:complexContent>
				<xsd:extension base="xsd:anyType">
					<xsd:attribute name="name" type="xsd:string"
						use="required" />
					<xsd:attribute name="value" type="xsd:string" />
				</xsd:extension>
			</xsd:complexContent>
		</xsd:complexType>
	</xsd:element>
	
	<xsd:element name="globals">
        <xsd:annotation>
            <xsd:documentation xml:lang="en">
                A container for the configurations global to a jbossesb config file
            </xsd:documentation>
        </xsd:annotation>
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="war-security" minOccurs="0" maxOccurs="1">
                    <xsd:annotation>
                            <xsd:documentation xml:lang="en">
                            Security configuration that is global to the jboss-esb.xml file. 
                            These configuration settings are shared for all http-providers and EBWS that are defined in jboss-esb.xml.Domain.
                            </xsd:documentation>
                    </xsd:annotation>
                    <xsd:complexType>
                        <xsd:attribute name="method" use="optional" default="BASIC">
	                        <xsd:simpleType>
	                            <xsd:restriction base="xsd:NMTOKEN">
		                            <xsd:enumeration value="BASIC" />
	                                <xsd:enumeration value="DIGEST" />
	                                <xsd:enumeration value="CLIENT-CERT" />
	                            </xsd:restriction>
	                        </xsd:simpleType>
                        </xsd:attribute>
                        <xsd:attribute name="domain" type="xsd:string" use="optional">
                            <xsd:annotation>
                                <xsd:documentation xml:lang="en">Security Domain.</xsd:documentation>
                            </xsd:annotation>
                        </xsd:attribute>
                    </xsd:complexType>
                </xsd:element>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>

	<!-- 88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
		Provider and Bus base types.
		88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888-->

	<xsd:element name="providers">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				A container for the providers referenced in the jbossesb
				config file
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:sequence>
				<xsd:element maxOccurs="unbounded" minOccurs="0"
					ref="jesb:provider" />
			</xsd:sequence>
		</xsd:complexType>
	</xsd:element>
	<xsd:complexType abstract="true" name="provider">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				Abstract provider.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:sequence>
			<xsd:element maxOccurs="unbounded" minOccurs="0"
				ref="jesb:property" />
		</xsd:sequence>
		<xsd:attribute name="name" type="xsd:string" use="required" />
	</xsd:complexType>
	<xsd:element abstract="true" name="provider" type="jesb:provider" />

	<xsd:complexType name="bus-provider">
		<xsd:complexContent>
			<xsd:extension base="jesb:provider">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						A provider of a bus. So for instance you can
						have a jms-provider (JBossMQ) or an
						ftp-provider.
					</xsd:documentation>
				</xsd:annotation>
				<xsd:sequence>
					<xsd:element maxOccurs="unbounded" minOccurs="1"
						ref="jesb:bus" />
				</xsd:sequence>
			</xsd:extension>
		</xsd:complexContent>
	</xsd:complexType>
	<xsd:element name="bus-provider"
		substitutionGroup="jesb:provider">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				Generic Bus Provider.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:complexContent>
				<xsd:extension base="jesb:bus-provider" />
			</xsd:complexContent>
		</xsd:complexType>
	</xsd:element>

	<xsd:complexType name="bus">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				A bus (also called "channel" by others) is a means by
				which Services communicate with each other (JMS, FTP,
				HTTP, etc).
			</xsd:documentation>
		</xsd:annotation>
		<xsd:sequence>
			<xsd:element maxOccurs="unbounded" minOccurs="0"
				ref="jesb:property" />
		</xsd:sequence>
		<xsd:attribute name="busid" type="xsd:string" use="required">
			<xsd:annotation>
				<xsd:documentation xml:lang="en">
					An id such that this bus can be referenced by
					Service listn.
				</xsd:documentation>
			</xsd:annotation>
		</xsd:attribute>
	</xsd:complexType>
	<xsd:element name="bus" type="jesb:bus" />

	<xsd:element name="schedule-provider"
		substitutionGroup="jesb:provider">
		<xsd:complexType>
			<xsd:complexContent>
				<xsd:extension base="jesb:provider">
					<xsd:sequence>
						<xsd:element maxOccurs="unbounded" minOccurs="1"
							ref="jesb:schedule" />
					</xsd:sequence>
				</xsd:extension>
			</xsd:complexContent>
		</xsd:complexType>
	</xsd:element>

	<xsd:complexType abstract="true" name="schedule">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				Schedule Configuration.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:sequence>
			<xsd:element maxOccurs="unbounded" minOccurs="0"
				ref="jesb:property" />
		</xsd:sequence>
		<xsd:attribute name="scheduleid" type="xsd:string"
			use="required">
			<xsd:annotation>
				<xsd:documentation xml:lang="en">
					An id such that this schedule can be referenced by
					Service listner.
				</xsd:documentation>
			</xsd:annotation>
		</xsd:attribute>
		<xsd:attribute name="startDate" type="xsd:dateTime"
			use="optional">
			<xsd:annotation>
				<xsd:documentation xml:lang="en">
					Schedule start time and date.
				</xsd:documentation>
			</xsd:annotation>
		</xsd:attribute>
		<xsd:attribute name="endDate" type="xsd:dateTime"
			use="optional">
			<xsd:annotation>
				<xsd:documentation xml:lang="en">
					Schedule end time and date.
				</xsd:documentation>
			</xsd:annotation>
		</xsd:attribute>
	</xsd:complexType>
	<xsd:element abstract="true" name="schedule" type="jesb:schedule" />

	<xsd:element name="simple-schedule"
		substitutionGroup="jesb:schedule">
		<xsd:complexType>
			<xsd:complexContent>
				<xsd:extension base="jesb:schedule">
                    <xsd:attribute name="frequency" use="optional" type="xsd:long" default="10">
                        <xsd:annotation>
                            <xsd:documentation xml:lang="en">Schedule frequency.</xsd:documentation>
                        </xsd:annotation>
                    </xsd:attribute>
                    <xsd:attribute name="frequencyUnits" use="optional" type="jesb:frequency-unit" default="seconds">
                        <xsd:annotation>
                            <xsd:documentation xml:lang="en">Schedule frequency time units.</xsd:documentation>
                        </xsd:annotation>
                    </xsd:attribute>
					<xsd:attribute default="-1" name="execCount" type="xsd:int" use="optional">
						<xsd:annotation>
							<xsd:documentation xml:lang="en">
								Schedule execution count. -1 to execute indefinitely.
							</xsd:documentation>
						</xsd:annotation>
					</xsd:attribute>
				</xsd:extension>
			</xsd:complexContent>
		</xsd:complexType>
	</xsd:element>

    <xsd:simpleType name="frequency-unit">
        <xsd:restriction base="xsd:NMTOKEN">
            <xsd:enumeration value="seconds"/>
            <xsd:enumeration value="milliseconds"/>
        </xsd:restriction>
    </xsd:simpleType>
    
    <xsd:element name="cron-schedule"
		substitutionGroup="jesb:schedule">
		<xsd:complexType>
			<xsd:complexContent>
				<xsd:extension base="jesb:schedule">
					<xsd:attribute name="cronExpression"
						type="xsd:string" use="optional">
						<xsd:annotation>
							<xsd:documentation xml:lang="en">
								Schedule CRON expression.
							</xsd:documentation>
						</xsd:annotation>
					</xsd:attribute>
				</xsd:extension>
			</xsd:complexContent>
		</xsd:complexType>
	</xsd:element>

	<!-- 88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
		Service and Action types.
		88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888-->

	<xsd:element name="services">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				A container for services.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:sequence>
				<xsd:element maxOccurs="unbounded" minOccurs="1"
					ref="jesb:service" />
			</xsd:sequence>
		</xsd:complexType>
	</xsd:element>
	<xsd:element name="service">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				A service has listener or gateways and a list of
				actions.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:sequence>
				<xsd:element maxOccurs="1" minOccurs="0" ref="jesb:security" />
                <xsd:element maxOccurs="unbounded" minOccurs="0"
                    ref="jesb:property" />
				<xsd:element maxOccurs="1" minOccurs="0"
					ref="jesb:listeners" />
				<xsd:element maxOccurs="1" minOccurs="0"
					ref="jesb:actions" />
			</xsd:sequence>
			<xsd:attribute name="category"
				use="required">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						The service category which will be used to store
						a reference to this service in the registry.
					</xsd:documentation>
				</xsd:annotation>
                                <xsd:simpleType>
                                        <xsd:restriction base="xsd:string">
                                                <xsd:maxLength value="255"/>
                                        </xsd:restriction>
				</xsd:simpleType>
			</xsd:attribute>
			<xsd:attribute name="name"
				use="required">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						The service name which will be used to store a
						reference to this service in the registry.
					</xsd:documentation>
				</xsd:annotation>
                                <xsd:simpleType>
                                        <xsd:restriction base="xsd:string">
                                                <xsd:maxLength value="255"/>
                                        </xsd:restriction>
                                </xsd:simpleType>
			</xsd:attribute>
			<xsd:attribute name="description"
				use="required">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						The service description which stored with this
						service in the registry, so that the purpose of
						this service can be understood by a human.
					</xsd:documentation>
				</xsd:annotation>
                                <xsd:simpleType>
                                        <xsd:restriction base="xsd:string">
                                                <xsd:maxLength value="255"/>
                                        </xsd:restriction>
                                </xsd:simpleType>
			</xsd:attribute>
			<xsd:attribute name="alertTimeThreshold"
				use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						A value used for monitoring to produce alerts
						if the service takes longer to complete than
						the value of the field.
					</xsd:documentation>
				</xsd:annotation>
				<xsd:simpleType>
					<xsd:restriction base="xsd:decimal"/>
				</xsd:simpleType>
			</xsd:attribute>
			<xsd:attribute name="alertLengthThreshold"
				use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						A value used for monitoring to produce alerts
						if the service takes longer to complete than
						the value of the field.
					</xsd:documentation>
				</xsd:annotation>
				<xsd:simpleType>
					<xsd:restriction base="xsd:decimal"/>
				</xsd:simpleType>
			</xsd:attribute>
            <xsd:attribute name="invmScope" type="jesb:invmScope" use="optional">
                <xsd:annotation>
                    <xsd:documentation xml:lang="en">
                        All services are locally invokable over an "in VM" transport.  Invokability
                        can be scoped using this attribute.  An "invmScope" value of "NONE" means that
                        the Service should not be locally invokable over the "in VM" transport.
                        More fine grained scoping will be added in the future.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:attribute>
            <xsd:attribute name="invmTransacted" type="xsd:boolean">
                <xsd:annotation>
                    <xsd:documentation xml:lang="en">
                        Should the InVM listener execute in a transacted environment?
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:attribute>
		</xsd:complexType>
	</xsd:element>

    <xsd:simpleType name="invmScope">
        <xsd:restriction base="xsd:NMTOKEN">
            <!-- Not invokable over InVM -->
            <xsd:enumeration value="NONE" />

            <!-- Invokable over InVM only from within the same/local deployment. -->
            <!-- xsd:enumeration value="LOCAL" / -->

            <!-- (DEFAULT) Invokable over InVM from within the same classloader scope. -->
            <xsd:enumeration value="GLOBAL" />
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:simpleType name="mepType">
		<xsd:restriction base="xsd:string">
			<xsd:enumeration value="RequestResponse" />
			<xsd:enumeration value="OneWay" />
		</xsd:restriction>
	</xsd:simpleType>

	<xsd:element name="actions">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				A container for actions belonging to this service.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:sequence>
				<xsd:element maxOccurs="unbounded" minOccurs="1"
					ref="jesb:action" />
			</xsd:sequence>
			<xsd:attribute name="mep" type="jesb:mepType" />
                        <xsd:attribute name="inXsd" type="xsd:string" />
                        <xsd:attribute name="outXsd" type="xsd:string" />
                        <xsd:attribute name="requestLocation" type="xsd:string"/>
                        <xsd:attribute name="responseLocation" type="xsd:string"/>
                        <xsd:attribute name="faultXsd" type="xsd:string" />
                        <xsd:attribute name="webservice" type="xsd:boolean" default="true"/>
                        <xsd:attribute name="validate" type="xsd:boolean" default="false"/>
                        <xsd:attribute name="addressing" type="xsd:boolean" default="false"/>
		</xsd:complexType>
	</xsd:element>
	<xsd:element name="action">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				An action which will act on the message when it is
				received by the service. Actions can be chained. Hence
				you can specify a list of actions. Action are
				'pluggable' and can be custom code, however JBossESB
				comes with a list of predefined actions.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:sequence>
				<xsd:element maxOccurs="unbounded" minOccurs="0"
					ref="jesb:property" />
			</xsd:sequence>
			<xsd:attribute name="name" type="xsd:string"
				use="required">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						The logical name of the action.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute name="class" type="xsd:string"
				use="required">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						The full classname of the java class in which
						this action is defined.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute name="process" type="xsd:string">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						The name of the method on the action that needs
						to be called when the message is received.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute name="alertTimeThreshold"
				use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						A value used for monitoring to produce alerts
						if the service takes longer to complete than
						the value of the field.
					</xsd:documentation>
				</xsd:annotation>
				<xsd:simpleType>
					<xsd:restriction base="xsd:decimal"/>
				</xsd:simpleType>
			</xsd:attribute>
			<xsd:attribute name="alertLengthThreshold"
				use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						A value used for monitoring to produce alerts
						if the service takes longer to complete than
						the value of the field.
					</xsd:documentation>
				</xsd:annotation>
				<xsd:simpleType>
					<xsd:restriction base="xsd:decimal"/>
				</xsd:simpleType>
			</xsd:attribute>
		</xsd:complexType>
	</xsd:element>

	<xsd:element name="security">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:sequence>
				<xsd:element maxOccurs="unbounded" minOccurs="0" ref="jesb:property" />
			</xsd:sequence>
			<xsd:attribute name="runAs" type="xsd:string" use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
					 Is used to specify that a specific security role given by the role-name value should be used 
					 as the security identity for this service.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute name="rolesAllowed" type="xsd:string" use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
					Specifies one or more logical roles that are allowed to acccess the service.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute name="moduleName" type="xsd:string" use="required">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute name="useCallerIdentity" type="xsd:string" use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
					Is used to indicate that the current caller's identity should be propagated as the security identity
					this service.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute name="callbackHandler" type="xsd:string" use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
					CallbackHandler implementation class. This will override the global callbackhandler 
					which can be specified in jbossesb-properties.xml
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
		</xsd:complexType>
	</xsd:element>

	<!-- 88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
		Listener base types.
		88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888-->

	<xsd:element name="listeners">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				A container for all listener for a service.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:sequence>
				<xsd:element maxOccurs="unbounded" minOccurs="1"
					ref="jesb:abstract-listener" />
			</xsd:sequence>
		</xsd:complexType>
	</xsd:element>
	<xsd:complexType name="listener">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				A listener is a listener or a gateway. The listener
				defines to which bus the service is listening. The
				service can simultaneniously listen to multiple buses.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:sequence>
			<xsd:element maxOccurs="unbounded" minOccurs="0"
				ref="jesb:property" />
		</xsd:sequence>
		<xsd:attribute name="name" type="xsd:string" use="required">
			<xsd:annotation>
				<xsd:documentation xml:lang="en">
					The logical name of the listener.
				</xsd:documentation>
			</xsd:annotation>
		</xsd:attribute>
		<xsd:attribute default="$not-defined$" name="busidref"
			type="xsd:string" use="optional">
			<xsd:annotation>
				<xsd:documentation xml:lang="en">
					A reference to an existing bus, as defined in the
					'buses' section of this jbossesb config.
				</xsd:documentation>
			</xsd:annotation>
		</xsd:attribute>
	</xsd:complexType>

    <xsd:complexType abstract="true" name="gateway-only-listener">
        <xsd:annotation>
            <xsd:documentation xml:lang="en">
                Listener type that can only act as a message-unaware listener (gateway) .
            </xsd:documentation>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="jesb:listener" />
        </xsd:complexContent>
    </xsd:complexType>

    <xsd:complexType name="dual-listener">
        <xsd:annotation>
            <xsd:documentation xml:lang="en">
                Listener type that can act as both a message-aware and message-unaware listener (gateway).
            </xsd:documentation>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="jesb:listener">
                <xsd:attribute default="1" name="maxThreads" type="xsd:int" use="optional">
                    <xsd:annotation>
                        <xsd:documentation xml:lang="en">
                            The number of threads which will be started for this
                            listener.
                        </xsd:documentation>
                    </xsd:annotation>
                </xsd:attribute>
                <xsd:attribute default="false" name="is-gateway" type="xsd:boolean" use="optional">
                    <xsd:annotation>
                        <xsd:documentation xml:lang="en">
                            true if the listener is a gateway. A gateway is an
                            ESB-Unware listener, while a listener is ESB-aware
                            and as such expects jbossesb formatted messages.
                        </xsd:documentation>
                    </xsd:annotation>
                </xsd:attribute>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>

    <xsd:element name="abstract-listener" type="jesb:listener" abstract="true"/>

    <xsd:element name="listener" type="jesb:dual-listener" substitutionGroup="jesb:abstract-listener"/>

	<xsd:complexType abstract="true"
		name="abstract-scheduled-listener">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				Abstract scheduled listener.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexContent>
			<xsd:extension base="jesb:dual-listener">
				<xsd:attribute default="-1"
					name="poll-frequency-seconds" type="xsd:int" use="optional">
<!-- Purposely defaults to -1 -->
					<xsd:annotation>
						<xsd:documentation xml:lang="en">
							DEPRECATED (use "schedule-frequency" or
							"scheduleidref"): The frequency with which
							this listener is scheduled (in seconds).
							Defaults to 10 seconds.
						</xsd:documentation>
					</xsd:annotation>
				</xsd:attribute>
				<xsd:attribute default="-1" name="schedule-frequency"
					type="xsd:int" use="optional">
<!-- Purposely defaults to -1 -->
					<xsd:annotation>
						<xsd:documentation xml:lang="en">
							The frequency with which this listener is
							scheduled (in seconds). Defaults to 10
							seconds.
						</xsd:documentation>
					</xsd:annotation>
				</xsd:attribute>
				<xsd:attribute name="scheduleidref" type="xsd:string"
					use="optional">
					<xsd:annotation>
						<xsd:documentation xml:lang="en">
							The id reference for the schedule that's
							driving this scheduled listener.
						</xsd:documentation>
					</xsd:annotation>
				</xsd:attribute>
			</xsd:extension>
		</xsd:complexContent>
	</xsd:complexType>

	<xsd:element name="scheduled-listener"
		substitutionGroup="jesb:abstract-listener">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				Scheduled listener.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:complexContent>
				<xsd:extension
					base="jesb:abstract-scheduled-listener">
					<xsd:attribute name="event-processor"
						type="xsd:string" use="required">
						<xsd:annotation>
							<xsd:documentation xml:lang="en">
								Message Composer class name.
							</xsd:documentation>
						</xsd:annotation>
					</xsd:attribute>
					<xsd:attribute name="transacted"
						type="xsd:boolean">
						<xsd:annotation>
							<xsd:documentation xml:lang="en">
								Should the schedule execute in a
								transacted environment?
							</xsd:documentation>
						</xsd:annotation>
					</xsd:attribute>
				</xsd:extension>
			</xsd:complexContent>
		</xsd:complexType>
	</xsd:element>

	<!-- JCA Types -->
	<xsd:element name="activation-config">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				Activation configuration for jca bus or listener.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:sequence>
				<xsd:element maxOccurs="unbounded" minOccurs="1"
					ref="jesb:property" />
			</xsd:sequence>
		</xsd:complexType>
	</xsd:element>
	<xsd:element name="jca-gateway" substitutionGroup="jesb:abstract-listener">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				A specific gateway using JCA inflow.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:complexContent>
				<xsd:extension base="jesb:gateway-only-listener">
					<xsd:sequence>
						<xsd:element maxOccurs="1" minOccurs="0"
							ref="jesb:activation-config" />
					</xsd:sequence>
					<xsd:attribute name="adapter" type="xsd:string"
						use="required" />
					<xsd:attribute name="endpointClass"
						type="xsd:string" use="required" />
					<xsd:attribute name="messagingType"
						type="xsd:string" use="optional" />
					<xsd:attribute name="jcaBridge" type="xsd:string"
						use="optional" />
					<xsd:attribute name="transacted" type="xsd:boolean"
						use="optional" />
				</xsd:extension>
			</xsd:complexContent>
		</xsd:complexType>
	</xsd:element>

	<!-- 88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
		JMS Type Implementations.
		88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888-->

	<xsd:element name="jms-message-filter">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				A JMS filter can add information to a Queue, or Topic.
				For example you can defined a message-selector. However,
				you can also push the queue name and type into this
				filter given you did not already specify them in the
				jms-bus.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:attribute name="dest-name" type="xsd:string"
				use="required">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						Name of the Queue of Topic.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute name="dest-type" use="required">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						A Queue delivers a message once, a topic
						broadcasts a message to all registered
						listeners.
					</xsd:documentation>
				</xsd:annotation>
				<xsd:simpleType>
					<xsd:restriction base="xsd:NMTOKEN">
						<xsd:enumeration value="QUEUE" />
						<xsd:enumeration value="TOPIC" />
					</xsd:restriction>
				</xsd:simpleType>
			</xsd:attribute>
			<xsd:attribute name="selector" type="xsd:string">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						A message-selector allows multiple listeners to
						register with the same queue/topic, but they
						will filter on this message-selector.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute default="true" name="persistent"
				type="xsd:boolean" use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						If false, JMS messages will be sent
						non-persistent. Default is to send messages with
						DeliveryMode.PERSISTENT.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute default="AUTO_ACKNOWLEDGE"
				name="acknowledge-mode" type="xsd:string" use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						JMS Session acknowledge mode. Can be on of
						AUTO_ACKNOWLEDGE (default), CLIENT_ACKNOWLEDGE,
						or DUPS_OK_ACKNOWLEDGE.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute 
				name="jms-security-principal" type="xsd:string" use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						JMS destination username. Will be used when creating a connection
						to the destination.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute 
				name="jms-security-credential" type="xsd:string" use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						JMS destination password. Will be used when creating a connection
						to the destination. Will be ignored if username is not specified.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute default="false" name="transacted"
				type="xsd:boolean" use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						If true, JMS sessions will be transaction aware.
						Default is false.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
		</xsd:complexType>
	</xsd:element>
	<xsd:element name="jms-bus" substitutionGroup="jesb:bus">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				A JMS-Bus is a specific instance of a bus using the JMS
				protocol.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:complexContent>
				<xsd:extension base="jesb:bus">
					<xsd:sequence>
						<xsd:element maxOccurs="1" minOccurs="0"
							ref="jesb:jms-message-filter" />
					</xsd:sequence>
				</xsd:extension>
			</xsd:complexContent>
		</xsd:complexType>
	</xsd:element>
	<xsd:complexType name="jms-provider-type">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				A specific instance of a provider, providing JMS.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexContent>
			<xsd:extension base="jesb:bus-provider">
				<xsd:attribute name="connection-factory"
					type="xsd:string" use="required">
					<xsd:annotation>
						<xsd:documentation xml:lang="en">
							The connection-factory used to lookup
							queues/topics in a naming directory (JNDI)
						</xsd:documentation>
					</xsd:annotation>
				</xsd:attribute>
				<xsd:attribute name="jndi-context-factory"
					type="xsd:string">
					<xsd:annotation>
						<xsd:documentation xml:lang="en">
							The context factory class the JBossESB will
							use to do naming lookups.
						</xsd:documentation>
					</xsd:annotation>
				</xsd:attribute>
				<xsd:attribute name="jndi-pkg-prefix"
					type="xsd:string">
					<xsd:annotation>
						<xsd:documentation xml:lang="en">
							The pkg-prefix which will be used to do
							naming lookups. It is left empty by default.
						</xsd:documentation>
					</xsd:annotation>
				</xsd:attribute>
				<xsd:attribute name="jndi-URL" type="xsd:anyURI">
					<xsd:annotation>
						<xsd:documentation xml:lang="en">
							The URL used to do naming lookups.
						</xsd:documentation>
					</xsd:annotation>
				</xsd:attribute>
			</xsd:extension>
		</xsd:complexContent>
	</xsd:complexType>
	<xsd:element name="jms-provider" substitutionGroup="jesb:provider"
		type="jesb:jms-provider-type" />

	<xsd:element name="jms-jca-provider"
		substitutionGroup="jesb:provider">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				A specific instance of a provider, providing JMS through
				JCA inflow.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:complexContent>
				<xsd:extension base="jesb:jms-provider-type">
                    <xsd:sequence>
                        <xsd:element maxOccurs="1" minOccurs="0"
                        ref="jesb:activation-config" />
                    </xsd:sequence>
					<xsd:attribute name="adapter" type="xsd:string">
						<xsd:annotation>
							<xsd:documentation xml:lang="en">
								The artifact containing the resource
								adapter.
							</xsd:documentation>
						</xsd:annotation>
					</xsd:attribute>
					<xsd:attribute name="endpointClass"
						type="xsd:string">
						<xsd:annotation>
							<xsd:documentation xml:lang="en">
								The class name of the JCA endpoint.
							</xsd:documentation>
						</xsd:annotation>
					</xsd:attribute>
					<xsd:attribute name="messagingType"
						type="xsd:string">
						<xsd:annotation>
							<xsd:documentation xml:lang="en">
								The class name of the messaging specific
								interface.
							</xsd:documentation>
						</xsd:annotation>
					</xsd:attribute>
					<xsd:attribute name="jcaBridge" type="xsd:string">
						<xsd:annotation>
							<xsd:documentation xml:lang="en">
								The class name of the JCA Bridge.
							</xsd:documentation>
						</xsd:annotation>
					</xsd:attribute>
					<xsd:attribute name="transacted"
						type="xsd:boolean">
						<xsd:annotation>
							<xsd:documentation xml:lang="en">
								The transacted flag.
							</xsd:documentation>
						</xsd:annotation>
					</xsd:attribute>
					<xsd:attribute name="providerAdapterJNDI" type="xsd:string">
						<xsd:annotation>
							<xsd:documentation xml:lang="en">
								The JNDI location of an alternate provider adapter
							</xsd:documentation>
						</xsd:annotation>
					</xsd:attribute>
				</xsd:extension>
			</xsd:complexContent>
		</xsd:complexType>
	</xsd:element>
	<xsd:element name="jms-listener"
		substitutionGroup="jesb:abstract-listener">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				A specific listener using the jms protocol.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:complexContent>
				<xsd:extension base="jesb:dual-listener">
					<xsd:sequence>
						<xsd:element maxOccurs="1" minOccurs="0"
							ref="jesb:jms-message-filter" />
					</xsd:sequence>
				</xsd:extension>
			</xsd:complexContent>
		</xsd:complexType>
	</xsd:element>

	<!-- 88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
		FS Type Implementations.
		88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888-->
	<xsd:element name="fs-message-filter">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				A FS filter.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:attribute name="directory" type="xsd:string"
				use="required">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						The file share that is monitored for incoming
						new files.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute name="input-suffix" type="xsd:string"
				use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						The file suffix used to filter files targeted
						for comsumption by the ESB (note: add the dot,
						so something like '.esbIn').
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute default=".esbInProcess" name="work-suffix"
				type="xsd:string" use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						The file suffix used while the file is being
						process, so that another thread or process won't
						pick it up too.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute default="true" name="post-delete"
				type="xsd:boolean" use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						If true, the file will be deleted after it is
						processed. Note that in that case post-directory
						and post-suffix have no effect.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute default="true" name="post-rename"
				type="xsd:boolean" use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						If true, the file will be renamed after it is
						processed. Note that in that case post-directory
						and post-suffix have no effect.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute default="processed" name="post-directory"
				type="xsd:string" use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						The file share to which the file will be moved
						after it is processed by the ESB
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute default=".esbDone" name="post-suffix"
				type="xsd:string" use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						The file suffix which will be added to the file
						name after it is processed.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute default="true" name="error-delete"
				type="xsd:boolean" use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						If true, the file will be deleted if an error
						occurs during processing. Note that in that case
						error-directory and error-suffix have no effect.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute default="processed" name="error-directory"
				type="xsd:string" use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						The file share to which the file will be moved
						after when an error occurs during processing.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute default=".esbERROR" name="error-suffix"
				type="xsd:string" use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						The file suffix which will be added to the file
						name after an error occurs during processing.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
		</xsd:complexType>
	</xsd:element>
	<xsd:element name="fs-bus" substitutionGroup="jesb:bus">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				A Fs-Bus is a specific instance of a bus using the File
				protocol.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:complexContent>
				<xsd:extension base="jesb:bus">
					<xsd:sequence>
						<xsd:element maxOccurs="1" minOccurs="0"
							ref="jesb:fs-message-filter" />
					</xsd:sequence>
				</xsd:extension>
			</xsd:complexContent>
		</xsd:complexType>
	</xsd:element>
	<xsd:element name="fs-provider" substitutionGroup="jesb:provider">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				A specific instance of a provider, providing a file
				system (local fileshare or NAS).
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:complexContent>
				<xsd:extension base="jesb:bus-provider" />
			</xsd:complexContent>
		</xsd:complexType>
	</xsd:element>
	<xsd:element name="fs-listener" substitutionGroup="jesb:abstract-listener">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				A specific listener using the file protocol.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:complexContent>
				<xsd:extension
					base="jesb:abstract-scheduled-listener">
					<xsd:sequence>
						<xsd:element maxOccurs="1" minOccurs="0"
							ref="jesb:fs-message-filter" />
					</xsd:sequence>
				</xsd:extension>
			</xsd:complexContent>
		</xsd:complexType>
	</xsd:element>
	<!-- 88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
		FTP Type Implementations.
		88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888-->
	<xsd:element name="ftp-message-filter">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				A FTP filter.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:attribute name="directory" type="xsd:string"
				use="required">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						The ftp directory that is monitored for incoming
						new files.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute name="username" type="xsd:string"
				use="required">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						The username used to access the ftp server
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute name="password" type="xsd:string">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						The password used to access the ftp server.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute name="input-suffix" type="xsd:string"
				use="required">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						The file suffix used to filter files targeted
						for comsumption by the ESB (note: add the dot,
						so something like '.esbIn').
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute default=".esbInProcess" name="work-suffix"
				type="xsd:string" use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						The file suffix used while the file is being
						process, so that another thread or process won't
						pick it up too.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute default="true" name="post-delete"
				type="xsd:boolean" use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						If true, the file will be deleted after it is
						processed. Note that in that case post-directory
						and post-suffix have no effect.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute default="true" name="post-rename"
                type="xsd:boolean" use="optional">
                <xsd:annotation>
                    <xsd:documentation xml:lang="en">
                        If true, the file will be renamed after it is
                        processed. Note that in that case post-directory
                        and post-suffix have no effect.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:attribute>
			<xsd:attribute name="post-directory" type="xsd:string"
				use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						The ftp directory to which the file will be
						moved after it is processed by the ESB
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute default=".esbDone" name="post-suffix"
				type="xsd:string" use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						The file suffix which will be added to the file
						name after it is processed.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute default="true" name="error-delete"
				type="xsd:boolean" use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						If true, the file will be deleted if an error
						occurs during processing. Note that in that case
						error-directory and error-suffix have no effect.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute default="processed" name="error-directory"
				type="xsd:string" use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						The ftp directory to which the file will be
						moved after when an error occurs during
						processing.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute default=".esbERROR" name="error-suffix"
				type="xsd:string" use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						The file suffix which will be added to the file
						name after an error occurs during processing.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute name="passive" type="xsd:boolean"
				use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						This is an ftp server setting which may vary per
						session.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute default="ftp" name="protocol"
				use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						The protocol, can be sftp (SSH File Transfer
						Protocol), ftps (FTP over SLL) and ftp (to which
						it defaults).
					</xsd:documentation>
				</xsd:annotation>
				<xsd:simpleType>
					<xsd:restriction base="xsd:NMTOKEN">
						<xsd:enumeration value="ftp" />
						<xsd:enumeration value="ftps" />
						<xsd:enumeration value="sftp" />
					</xsd:restriction>
				</xsd:simpleType>
			</xsd:attribute>
			<xsd:attribute name="certificate-url" type="xsd:string"
				use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						The url to a public server certificate for ftps, or to a
						private certificate for sftp client verification. sftp certificate
						can be located via a resource.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute name="certificate-name" type="xsd:string"
				use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						The common name of a certificate, which may be needed
						for ftps.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute name="certificate-passphrase" type="xsd:string"
				use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						The passphrase of the private key, if necessary, for sftp client verification.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute default="false" name="read-only"
				type="xsd:boolean" use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						If true, the ftp server does not permit write
						opertations on files. Note that in this case the
						following properties have no effect:
						work-suffix, post-delete, post-directory,
						post-suffix, error-delete, error-directory, and
						error-suffix.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
		</xsd:complexType>
	</xsd:element>
	<xsd:element name="ftp-bus" substitutionGroup="jesb:bus">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				A FTP-Bus is a specific instance of a bus using the FTP
				protocol.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:complexContent>
				<xsd:extension base="jesb:bus">
					<xsd:sequence>
						<xsd:element maxOccurs="1" minOccurs="0"
							ref="jesb:ftp-message-filter" />
					</xsd:sequence>
				</xsd:extension>
			</xsd:complexContent>
		</xsd:complexType>
	</xsd:element>
	<xsd:element name="ftp-provider"
		substitutionGroup="jesb:provider">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				A specific instance of a provider, providing a ftp
				service.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:complexContent>
				<xsd:extension base="jesb:bus-provider">
					<xsd:attribute name="hostname" type="xsd:string"
						use="required">
						<xsd:annotation>
							<xsd:documentation xml:lang="en">
								The ftp hostname, as it can be resolved
								by DNS.
							</xsd:documentation>
						</xsd:annotation>
					</xsd:attribute>
				</xsd:extension>
			</xsd:complexContent>
		</xsd:complexType>
	</xsd:element>
	<xsd:element name="ftp-listener"
		substitutionGroup="jesb:abstract-listener">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				A specific listener using the ftp protocol.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:complexContent>
				<xsd:extension
					base="jesb:abstract-scheduled-listener">
					<xsd:sequence>
						<xsd:element maxOccurs="1" minOccurs="0"
							ref="jesb:ftp-message-filter" />
					</xsd:sequence>
				</xsd:extension>
			</xsd:complexContent>
		</xsd:complexType>
	</xsd:element>

	<!-- 88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
		SQL Type Implementations.
		88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888-->
	<xsd:element name="sql-message-filter">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				A SQL filter.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:attribute name="tablename" type="xsd:string"
				use="required">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						The table in which esb message are stored.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute name="message-id-column"
				type="xsd:string" use="required">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						A unique key (PK) in the table.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
            <xsd:attribute name="retry-count-column" type="xsd:string" use="optional">
                <xsd:annotation>
                    <xsd:documentation xml:lang="en">
                        Column name for storing the message delivery retry count.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:attribute>
			<xsd:attribute name="message-column"
				type="xsd:string" use="required">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						The field that holds the serialized message.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute name="status-column"
				type="xsd:string" use="required">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						This column contents ('P', 'W', 'E' or 'D')
						indicates if the row is pending (P), in process
						(W), in error(E) or done (D) if postDelete
						and/or errorDelete are 'true' rows might be
						deleted
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute name="where-condition" use="optional"
				type="xsd:string" default="">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						A where clause, not including the word where,
						which is applied to the query.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute name="order-by" use="optional"
				type="xsd:string" default="">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						A where clause, not including the word where,
						which is applied to the query.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute name="insert-timestamp-column" use="optional"
				type="xsd:string">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						Holds the timestamp when the record was
						inserted.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute default="true" name="post-delete"
				type="xsd:boolean" use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						If true, records will be deleted after
						processing.((e.g. no rows with a 'D' for done,
						in column defined in 'status_column')
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute default="true" name="error-delete"
				type="xsd:boolean" use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						If true, records in error will be deleted after
						attempted picked up for processing.(e.g. no rows
						with a 'E' for error, in column defined in
						'status_column')
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
		</xsd:complexType>
	</xsd:element>
	<xsd:element name="sql-bus" substitutionGroup="jesb:bus">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				A SQL-Bus is a specific instance of a bus using the SQL
				protocol.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:complexContent>
				<xsd:extension base="jesb:bus">
					<xsd:sequence>
						<xsd:element maxOccurs="1" minOccurs="0"
							ref="jesb:sql-message-filter" />
					</xsd:sequence>
				</xsd:extension>
			</xsd:complexContent>
		</xsd:complexType>
	</xsd:element>
	<xsd:element name="sql-provider"
		substitutionGroup="jesb:provider">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				A specific instance of a provider, providing a db
				service.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:complexContent>
				<xsd:extension base="jesb:bus-provider">
					<xsd:attribute name="datasource" type="xsd:string"
						use="optional">
						<xsd:annotation>
							<xsd:documentation xml:lang="en">
								The name of the datasource.
							</xsd:documentation>
						</xsd:annotation>
					</xsd:attribute>
					<xsd:attribute name="url" type="xsd:string"
						use="optional">
						<xsd:annotation>
							<xsd:documentation xml:lang="en">
								The url needed to connect to the db.
							</xsd:documentation>
						</xsd:annotation>
					</xsd:attribute>
					<xsd:attribute name="driver" type="xsd:string"
						use="optional">
						<xsd:annotation>
							<xsd:documentation xml:lang="en">
								The driver needed to connect to the db.
							</xsd:documentation>
						</xsd:annotation>
					</xsd:attribute>
					<xsd:attribute name="username" type="xsd:string"
						use="optional">
						<xsd:annotation>
							<xsd:documentation xml:lang="en">
								The username used to access the
								database.
							</xsd:documentation>
						</xsd:annotation>
					</xsd:attribute>
					<xsd:attribute name="password" type="xsd:string"
						use="optional">
						<xsd:annotation>
							<xsd:documentation xml:lang="en">
								The password used to access the
								database.
							</xsd:documentation>
						</xsd:annotation>
					</xsd:attribute>
					<xsd:attribute name="transacted"
						type="xsd:boolean">
						<xsd:annotation>
							<xsd:documentation xml:lang="en">
								The transacted flag.
							</xsd:documentation>
						</xsd:annotation>
					</xsd:attribute>
				</xsd:extension>
			</xsd:complexContent>
		</xsd:complexType>
	</xsd:element>
	<xsd:element name="sql-listener"
		substitutionGroup="jesb:abstract-listener">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				A specific listener using the SQL protocol.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:complexContent>
				<xsd:extension base="jesb:dual-listener">
					<xsd:sequence>
						<xsd:element maxOccurs="1" minOccurs="0"
							ref="jesb:sql-message-filter" />
					</xsd:sequence>
					<xsd:attribute default="10"
						name="poll-frequency-seconds" use="optional">
						<xsd:annotation>
							<xsd:documentation xml:lang="en">
								The frequency with which this listener
								polls the db in seconds. Defaults to 10
								seconds.
							</xsd:documentation>
						</xsd:annotation>
						<xsd:simpleType>
							<xsd:restriction base="xsd:integer">
								<xsd:minExclusive value="0" />
							</xsd:restriction>
						</xsd:simpleType>
					</xsd:attribute>
				</xsd:extension>
			</xsd:complexContent>
		</xsd:complexType>
	</xsd:element>

	<!-- 88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
		Hibernate Type Implementations.
		88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888-->
	<xsd:element name="hibernate-message-filter">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				A Hibernate filter.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:attribute name="classname" type="xsd:string"
				use="required">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						The class name to monitor.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
			<xsd:attribute default="message_id" name="event"
				type="xsd:string" use="optional">
				<xsd:annotation>
					<xsd:documentation xml:lang="en">
						A comma-separated list of events to intercept.
					</xsd:documentation>
				</xsd:annotation>
			</xsd:attribute>
		</xsd:complexType>
	</xsd:element>
	<xsd:element name="hibernate-bus" substitutionGroup="jesb:bus">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				A hibernate-bus is a specific instance of a bus using
				the Hibernate protocol.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:complexContent>
				<xsd:extension base="jesb:bus">
					<xsd:sequence>
						<xsd:element maxOccurs="unbounded" minOccurs="1"
							ref="jesb:hibernate-message-filter" />
					</xsd:sequence>
				</xsd:extension>
			</xsd:complexContent>
		</xsd:complexType>
	</xsd:element>
	<xsd:element name="hibernate-provider"
		substitutionGroup="jesb:provider">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				A specific instance of a provider, providing a hibernate
				service.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:complexContent>
				<xsd:extension base="jesb:bus-provider">
					<xsd:attribute name="hibernate-cfg-file"
						type="xsd:string" use="required">
						<xsd:annotation>
							<xsd:documentation xml:lang="en">
								The Hibernate configuration file to use.
							</xsd:documentation>
						</xsd:annotation>
					</xsd:attribute>
				</xsd:extension>
			</xsd:complexContent>
		</xsd:complexType>
	</xsd:element>
	<xsd:element name="hibernate-listener"
		substitutionGroup="jesb:abstract-listener">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				A specific listener using the hibernate protocol.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:complexContent>
				<xsd:extension base="jesb:dual-listener">
					<xsd:sequence>
						<xsd:element maxOccurs="unbounded" minOccurs="0"
							ref="jesb:hibernate-message-filter" />
					</xsd:sequence>
				</xsd:extension>
			</xsd:complexContent>
		</xsd:complexType>
	</xsd:element>



	<!-- 88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
		JBoss Remoting Type Implementations.
		88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888-->
	<xsd:element name="jbr-bus" substitutionGroup="jesb:bus">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				JBoss Remoting Bus
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:complexContent>
				<xsd:extension base="jesb:bus">
					<xsd:attribute name="port" type="xsd:int"
						use="required">
						<xsd:annotation>
							<xsd:documentation xml:lang="en">
								JBoss Remoting Server listen port.
							</xsd:documentation>
						</xsd:annotation>
					</xsd:attribute>
				</xsd:extension>
			</xsd:complexContent>
		</xsd:complexType>
	</xsd:element>
	<xsd:element name="jbr-provider"
		substitutionGroup="jesb:provider">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				JBoss Remoting Provider.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:complexContent>
				<xsd:extension base="jesb:bus-provider">
					<xsd:attribute name="protocol" use="required">
						<xsd:annotation>
							<xsd:documentation xml:lang="en">
								Jboss Remoting Listener/Server protocol.
							</xsd:documentation>
						</xsd:annotation>
						<xsd:simpleType>
							<xsd:restriction base="xsd:NMTOKEN">
								<xsd:enumeration value="http" />
                                <xsd:enumeration value="https" />
								<xsd:enumeration value="socket" />
                                <xsd:enumeration value="sslsocket" />
							</xsd:restriction>
						</xsd:simpleType>
					</xsd:attribute>
					<xsd:attribute name="host" type="xsd:string">
						<xsd:annotation>
							<xsd:documentation xml:lang="en">
								JBoss Remoting Server bind address. When
								not specified, defaults to
								InetAddress.getLocalHost().getHostName().
							</xsd:documentation>
						</xsd:annotation>
					</xsd:attribute>
				</xsd:extension>
			</xsd:complexContent>
		</xsd:complexType>
	</xsd:element>
	<xsd:element name="jbr-listener"
		substitutionGroup="jesb:abstract-listener">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				JBoss Remoting Listener.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:complexContent>
				<xsd:extension base="jesb:dual-listener" />
			</xsd:complexContent>
		</xsd:complexType>
	</xsd:element>


        <!-- 88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
		Http Type Implementations.
             88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888-->
	<xsd:element name="http-bus" substitutionGroup="jesb:bus">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
			     Http Bus 
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:complexContent>
				<xsd:extension base="jesb:bus">
                    <xsd:choice minOccurs="0" maxOccurs="2">
                        <xsd:element name="protected-methods" minOccurs="0" maxOccurs="1">
                            <xsd:complexType>
                                <xsd:sequence>
                                    <xsd:element name="method" minOccurs="1" maxOccurs="5">
                                        <xsd:complexType>
                                            <xsd:attribute name="name" use="required">
                                                <xsd:simpleType>
                                                    <xsd:restriction base="xsd:NMTOKEN">
                                                        <xsd:enumeration value="GET" />
                                                        <xsd:enumeration value="POST" />
                                                        <xsd:enumeration value="PUT" />
                                                        <xsd:enumeration value="DELETE" />
                                                        <xsd:enumeration value="HEAD" />
                                                    </xsd:restriction>
                                                </xsd:simpleType>
                                            </xsd:attribute>
                                        </xsd:complexType>
                                    </xsd:element>
                                </xsd:sequence>
                            </xsd:complexType>
                        </xsd:element>
                        <xsd:element name="allowed-roles" minOccurs="0" maxOccurs="1">
                            <xsd:complexType>
                                <xsd:sequence>
                                    <xsd:element name="role" minOccurs="1" maxOccurs="unbounded">
                                        <xsd:complexType>
                                            <xsd:attribute name="name" type="xsd:string" use="required" />
                                        </xsd:complexType>
                                    </xsd:element>
                                </xsd:sequence>
                            </xsd:complexType>
                        </xsd:element>
                    </xsd:choice>
                    <xsd:attribute name="transportGuarantee" use="optional">
                        <xsd:simpleType>
                            <xsd:restriction base="xsd:NMTOKEN">
                                <xsd:enumeration value="NONE" />
                                <xsd:enumeration value="INTEGRAL" />
                                <xsd:enumeration value="CONFIDENTIAL" />
                            </xsd:restriction>
                        </xsd:simpleType>
                    </xsd:attribute>
                </xsd:extension>
			</xsd:complexContent>
		</xsd:complexType>
	</xsd:element>
	<xsd:element name="http-provider"
		substitutionGroup="jesb:provider">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				Http Provider.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:complexContent>
				<xsd:extension base="jesb:bus-provider">
                    <xsd:sequence>
                        <xsd:element name="exception" type="jesb:httpExceptionMappings" minOccurs="0" maxOccurs="1" />
                    </xsd:sequence>
                </xsd:extension>
			</xsd:complexContent>
		</xsd:complexType>
	</xsd:element>
	<xsd:element name="http-gateway"
		substitutionGroup="jesb:abstract-listener">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				http Listener.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:complexContent>
				<xsd:extension base="jesb:gateway-only-listener">
                    <xsd:choice minOccurs="0" maxOccurs="2">
                        <xsd:element name="exception" type="jesb:httpExceptionMappings">
                            <xsd:annotation>
                                <xsd:documentation xml:lang="en">
                                    Exception to HTTP status code mappings.
                                </xsd:documentation>
                            </xsd:annotation>
                        </xsd:element>
                        <xsd:element name="asyncResponse" type="jesb:asyncHttpResponse">
                            <xsd:annotation>
                                <xsd:documentation xml:lang="en">
                                    Aynchronous HTTP Response.  If set, the gateway will asynchronously deliver the
                                    message to the target Service.
                                </xsd:documentation>
                            </xsd:annotation>
                        </xsd:element>
                    </xsd:choice>
                    <xsd:attribute name="urlPattern" type="xsd:string" use="optional">
                        <xsd:annotation>
                            <xsd:documentation xml:lang="en">
                                The URL Pattern of requests to be filtered to this listener.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:attribute>
                    <xsd:attribute name="payloadAs" type="jesb:payloadAs" use="optional">
                        <xsd:annotation>
                            <xsd:documentation xml:lang="en">
                                Set the ESB Message payload ass either a String or an array of bytes.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:attribute>
                </xsd:extension>
			</xsd:complexContent>
		</xsd:complexType>
	</xsd:element>
    <xsd:simpleType name="payloadAs">
        <xsd:restriction base="xsd:NMTOKEN">
            <xsd:enumeration value="STRING"/>
            <xsd:enumeration value="BYTES"/>
        </xsd:restriction>
    </xsd:simpleType>
    <xsd:complexType name="httpExceptionMappings">
        <xsd:sequence>
            <xsd:element name="mapping" minOccurs="0" maxOccurs="unbounded">
                <xsd:complexType>
                    <xsd:attribute name="class" type="xsd:string" use="required" />
                    <xsd:attribute name="status" type="xsd:integer" use="required" />
                </xsd:complexType>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="mappingsFile" type="xsd:string" use="optional">
            <xsd:annotation>
                <xsd:documentation xml:lang="en">
                    Path to a .properties file containing a list of Exception to HTTP Status code mappings.
                </xsd:documentation>
            </xsd:annotation>
        </xsd:attribute>
    </xsd:complexType>
    <xsd:complexType name="asyncHttpResponse">
        <xsd:sequence>
            <xsd:element name="payload" minOccurs="0" maxOccurs="1">
                <xsd:annotation>
                    <xsd:documentation xml:lang="en">
                        Static HTTP Gateway response payload for async message delivery to service.
                        <p/>
                        If not set, an empty (zero length) payload will be returned in the HTTP Response.
                    </xsd:documentation>
                </xsd:annotation>
                <xsd:complexType>
                    <xsd:attribute name="classpathResource" type="xsd:string" use="required" />
                    <xsd:attribute name="contentType" type="xsd:string" use="required" />
                    <xsd:attribute name="characterEncoding" type="xsd:string" use="optional" />
                </xsd:complexType>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="statusCode" type="xsd:int" default="200" use="optional">
            <xsd:annotation>
                <xsd:documentation xml:lang="en">
                    Static HTTP Gateway response code for async message delivery to service.
                    <p/>
                    If not set, a 200 status (OK) will be returned in the HTTP Response.
                </xsd:documentation>
            </xsd:annotation>
        </xsd:attribute>
    </xsd:complexType>

	<!-- 88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
		Groovy Gateway Type Implementations.
		88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888-->
	<xsd:element name="groovy-listener"
		substitutionGroup="jesb:abstract-listener">
		<xsd:annotation>
			<xsd:documentation xml:lang="en">
				Groovy Listener.
			</xsd:documentation>
		</xsd:annotation>
		<xsd:complexType>
			<xsd:complexContent>
				<xsd:extension base="jesb:dual-listener">
					<xsd:attribute name="script" type="xsd:string"
						use="required">
						<xsd:annotation>
							<xsd:documentation xml:lang="en">
								The path (classpath) to the Groovy
								Gateway script. Or, the alias for the
								pre-packaged Groovy Gateway script.
							</xsd:documentation>
						</xsd:annotation>
					</xsd:attribute>
				</xsd:extension>
			</xsd:complexContent>
		</xsd:complexType>
	</xsd:element>
	
	<!-- 88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        UDP Gateway Type Implementations.
        88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888-->
    <xsd:element name="udp-listener" substitutionGroup="jesb:abstract-listener">
        <xsd:annotation>
            <xsd:documentation xml:lang="en">
                UDP Listener that uses Mina.
            </xsd:documentation>
        </xsd:annotation>
        <xsd:complexType>
            <xsd:complexContent>
                <xsd:extension base="jesb:dual-listener">
                    <xsd:attribute name="host" type="xsd:string" use="required">
                        <xsd:annotation>
                            <xsd:documentation xml:lang="en">
                                The host that this listener will listen to.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:attribute>
                    <xsd:attribute name="port" type="xsd:integer" use="required">
                        <xsd:annotation>
                            <xsd:documentation xml:lang="en">
                                The port that this listener will listen to.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:attribute>
                    <xsd:attribute name="handlerClass" type="xsd:string" use="optional" default="org.jboss.soa.esb.listeners.gateway.mina.DefaultMessageHandler">
                        <xsd:annotation>
                            <xsd:documentation xml:lang="en">
                                The fully qualified name of a org.jboss.soa.esb.listeners.gateway.mina.MessageHandler implementation.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:attribute>
                </xsd:extension>
            </xsd:complexContent>
        </xsd:complexType>
    </xsd:element>

</xsd:schema>
